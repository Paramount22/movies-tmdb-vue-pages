import{_ as m,a as _,o as r,c as l,b as n,t as u,r as c,d as b,w as B,T as x,e as C,F as S,f as P,v as I,g as v,h as g,i as A,j as D,k as V,L as w,N as L,l as h}from"./index-2b29af2b.js";const N={name:"PersonCard",props:{person:{type:Object}},data(){return{IMG_PATH:"https://image.tmdb.org/t/p/w1280",apiKey:"8335b966aa0001f618384081f205b83d",overlay:!1}},methods:{getPersonInfo(t){_.get(`https://api.themoviedb.org/3/person/${t}?api_key=${this.apiKey}&language=en-US`).then(e=>{this.$emit("person-data",e.data)}).catch(e=>{console.error(e)})}}},F=["src","alt"],O={class:"tmdb-data-title"},R={class:"tmdb-data-department"};function T(t,e,o,d,s,a){return r(),l("div",{class:"tmdb-data-card",onClick:e[0]||(e[0]=i=>(a.getPersonInfo(o.person.id),this.$emit("overlay-open")))},[n("img",{class:"tmdb-data-poster",src:`${s.IMG_PATH}${o.person.profile_path}`,alt:o.person.name},null,8,F),n("h4",O,u(o.person.name),1),n("div",R,u(o.person.known_for_department),1)])}const U=m(N,[["render",T]]);const K={name:"PeopleList",components:{PersonCard:U},props:{people:{type:Array}},methods:{getPersonData(t){this.$emit("get-person-data",t)}}};function q(t,e,o,d,s,a){const i=c("PersonCard");return r(),b(x,{tag:"div",name:"list",class:"tmdb-data"},{default:B(()=>[(r(!0),l(S,null,C(o.people,y=>(r(),b(i,{key:y.id,person:y,onOverlayOpen:e[0]||(e[0]=f=>this.$emit("overlay-open")),onPersonData:e[1]||(e[1]=f=>a.getPersonData(f))},null,8,["person"]))),128))]),_:1})}const G=m(K,[["render",q],["__scopeId","data-v-4877d9cd"]]),j={name:"PeopleMore",emits:["more-people","more-searched-people"],props:{people:{type:Array},totalResults:{type:Number},visibilityBtn:{type:Boolean},visibilityBtnSearch:{type:Boolean}}},H={key:0,class:"more-data"},E={key:1,class:"more-data"};function Q(t,e,o,d,s,a){return r(),l(S,null,[o.people.length?(r(),l("div",H,[P(n("button",{class:"more",onClick:e[0]||(e[0]=v(i=>this.$emit("more-people"),["prevent"]))}," More ",512),[[I,o.visibilityBtn]])])):g("",!0),o.people.length?(r(),l("div",E,[P(n("button",{class:"more",onClick:e[1]||(e[1]=v(i=>this.$emit("more-searched-people"),["prevent"]))}," More ",512),[[I,o.visibilityBtnSearch&&o.people.length!=o.totalResults]])])):g("",!0)],64)}const X=m(j,[["render",Q]]),Y={name:"PeopleSearch",data(){return{searchValue:""}},methods:{formSubmitted(){this.searchValue&&(this.$emit("form-submitted"),this.$emit("star-search-people"),this.searchValue="")}}},z=n("button",{type:"submit"},[n("img",{src:D,alt:"Search icon"})],-1);function J(t,e,o,d,s,a){return r(),l("form",{onSubmit:e[2]||(e[2]=v((...i)=>a.formSubmitted&&a.formSubmitted(...i),["prevent"]))},[P(n("input",{class:"search-input","onUpdate:modelValue":e[0]||(e[0]=i=>s.searchValue=i),onInput:e[1]||(e[1]=i=>this.$emit("searchedQuery",s.searchValue)),type:"text",placeholder:"Search person"},null,544),[[A,s.searchValue]]),z],32)}const W=m(Y,[["render",J]]);const Z={name:"PersonAbout",props:{overlay:{type:Boolean},personInfo:{type:Object}},data(){return{IMG_PATH:"https://image.tmdb.org/t/p/w1280"}},methods:{modifieStringDate(t){t=t.split("-").reverse();const e=t.indexOf("24"),o=2,d=t.splice(e,1)[0];return t.splice(o,0,d),t=t.join("."),t},calculateAge(t){const e=t.slice(0,4);return new Date().getFullYear()-+e}}},ee={key:0,class:"overlay"},te={class:"tmdb-data-about fade"},oe=["src"],se={class:"about"},ne={class:"tmdb-data-about-header"},ae={key:0},re={key:1},ie={class:"person-bio"};function le(t,e,o,d,s,a){return r(),b(V,{name:"scale"},{default:B(()=>[o.overlay?(r(),l("div",ee,[n("section",te,[n("img",{class:"tmdb-data-poster",src:`${s.IMG_PATH}${o.personInfo.profile_path}`,alt:""},null,8,oe),n("article",se,[n("header",ne,[n("h2",null,u(o.personInfo.name),1),n("div",{class:"tmdb-data-close-overlay",onClick:e[0]||(e[0]=i=>this.$emit("overlay-close"))}," X ")]),n("p",null,[o.personInfo.birthday?(r(),l("span",ae,"Birth: "+u(a.modifieStringDate(o.personInfo.birthday))+" - "+u(o.personInfo.place_of_birth),1)):g("",!0),o.personInfo.deathday?(r(),l("span",re,"Dead: "+u(a.modifieStringDate(o.personInfo.deathday)),1)):g("",!0)]),n("p",ie,u(o.personInfo.biography),1)])])])):g("",!0)]),_:1})}const pe=m(Z,[["render",le],["__scopeId","data-v-b1cd96ce"]]),de={components:{PeopleList:G,LoadingIcon:w,PeopleMore:X,PeopleSearch:W,NotFound:L,PersonAbout:pe},data(){return{people:[],apiKey:"8335b966aa0001f618384081f205b83d",page:1,loading:!1,query:"",message:"",totalResults:null,overlay:!1,personInfo:{},visibilityBtn:!0,visibilityBtnSearch:!1}},mounted(){this.getPeople()},methods:{getPeople(){this.loading=!0,_.get(`https://api.themoviedb.org/3/person/popular?api_key=${this.apiKey}&language=en-US&page=${this.page}`).then(t=>{this.people=t.data.results,this.loading=!1,this.message="",this.visibilityBtn=!0,this.visibilityBtnSearch=!1}).catch(t=>{console.error(t)})},getMorePeople(){this.loading=!0,this.page++,_.get(`https://api.themoviedb.org/3/person/popular?api_key=${this.apiKey}&language=en-US&page=${this.page}`).then(t=>{t.data.results.forEach(e=>{this.people.push(e)}),this.loading=!1,this.message=""}).catch(t=>{console.error(t)})},getPersonBySearch(){this.loading=!0,this.people=[],_.get(`https://api.themoviedb.org/3/search/person?api_key=${this.apiKey}&query=${encodeURI(this.query)}&language=en-US&page=${this.page}&include_adult=false`).then(t=>{this.totalResults=t.data.total_results,t.data.results.length===0?(this.loading=!1,this.message="No records found."):(this.people=t.data.results,this.loading=!1,this.message="")}).catch(t=>{console.error(t)})},getMorePersonBySearch(){this.loading=!0,this.page++,_.get(`https://api.themoviedb.org/3/search/person?api_key=${this.apiKey}&query=${encodeURI(this.query)}&language=en-US&page=${this.page}&include_adult=false`).then(t=>{t.data.results.forEach(e=>{this.people.push(e)}),this.loading=!1}).catch(t=>{console.error(t)})}}},ce={class:"tmdb-data-filter"},ue={class:"filter"};function he(t,e,o,d,s,a){const i=c("LoadingIcon"),y=c("PeopleSearch"),f=c("NotFound"),$=c("PeopleList"),k=c("PeopleMore"),M=c("PersonAbout");return r(),l(S,null,[n("main",null,[h(i,{loading:s.loading},null,8,["loading"]),n("div",ce,[n("div",ue,[n("a",{href:"#",onClick:e[0]||(e[0]=v((...p)=>a.getPeople&&a.getPeople(...p),["prevent"]))},"People")]),h(y,{onSearchedQuery:e[1]||(e[1]=p=>s.query=p),onFormSubmitted:a.getPersonBySearch,onStarSearchPeople:e[2]||(e[2]=p=>(s.visibilityBtn=!1,s.visibilityBtnSearch=!0))},null,8,["onFormSubmitted"])]),h(f,{message:s.message},null,8,["message"]),h($,{people:s.people,onOverlayOpen:e[3]||(e[3]=p=>s.overlay=!0),onGetPersonData:e[4]||(e[4]=p=>s.personInfo=p)},null,8,["people"]),h(k,{"total-results":s.totalResults,people:s.people,onMorePeople:a.getMorePeople,onMoreSearchedPeople:a.getMorePersonBySearch,"visibility-btn":s.visibilityBtn,"visibility-btn-search":s.visibilityBtnSearch},null,8,["total-results","people","onMorePeople","onMoreSearchedPeople","visibility-btn","visibility-btn-search"])]),h(M,{"person-info":s.personInfo,overlay:s.overlay,onOverlayClose:e[5]||(e[5]=p=>s.overlay=!1),"total-results":s.totalResults},null,8,["person-info","overlay","total-results"])],64)}const _e=m(de,[["render",he]]);export{_e as default};
