import{_ as v,o as a,c as h,f as y,i as k,b as i,g as f,j as x,t as u,n as B,r as d,d as p,w as T,T as A,e as R,F as w,v as I,h as b,m as V,k as L,L as N,N as P,a as S,l as c}from"./index-2b29af2b.js";const q={name:"SeriesSearch",data(){return{searchValue:""}},methods:{formSubmitted(){this.searchValue&&(this.$emit("form-submitted"),this.$emit("star-search-series"),this.searchValue="")}}},F=i("button",{type:"submit"},[i("img",{src:x,alt:"Search icon"})],-1);function G(e,t,s,m,r,o){return a(),h("form",{onSubmit:t[2]||(t[2]=f((...n)=>o.formSubmitted&&o.formSubmitted(...n),["prevent"]))},[y(i("input",{class:"search-input","onUpdate:modelValue":t[0]||(t[0]=n=>r.searchValue=n),onInput:t[1]||(t[1]=n=>this.$emit("searched-query",r.searchValue)),type:"text",placeholder:"Search person"},null,544),[[k,r.searchValue]]),F],32)}const O=v(q,[["render",G]]),U={name:"SeriesCard",props:{show:{type:Object}},data(){return{IMG_PATH:"https://image.tmdb.org/t/p/w1280"}},methods:{ratingToPercentage(e){return e*10},getClassByRating(e){if(e>=7)return"red";if(e>=4)return"blue";if(e>0)return"gray"}}},K=["src"],j={class:"tmdb-data-title"};function H(e,t,s,m,r,o){return a(),h("div",{class:"tmdb-data-card",onClick:t[0]||(t[0]=n=>(this.$emit("tv-show-info",s.show),this.$emit("overlay-open")))},[i("img",{class:"tmdb-data-poster",src:`${r.IMG_PATH}${s.show.poster_path}`,alt:""},null,8,K),i("h4",j,u(s.show.name),1),i("div",{class:B(["tmdb-data-rating",o.getClassByRating(s.show.vote_average)])},u(o.ratingToPercentage(s.show.vote_average))+"% ",3)])}const E=v(U,[["render",H]]);const D={name:"SeriesList",components:{SeriesCard:E},props:{tvShows:{type:Array}}};function z(e,t,s,m,r,o){const n=d("SeriesCard");return a(),p(A,{tag:"div",name:"list",class:"tmdb-data"},{default:T(()=>[(a(!0),h(w,null,R(s.tvShows,g=>(a(),p(n,{key:g.id,show:g,onTvShowInfo:t[0]||(t[0]=_=>this.$emit("tv-show-info",_)),onOverlayOpen:t[1]||(t[1]=_=>this.$emit("overlay-open"))},null,8,["show"]))),128))]),_:1})}const Q=v(D,[["render",z],["__scopeId","data-v-171a8448"]]),X={name:"SeriesMore",emits:["more-series","more-searched-series"],props:{tvShows:{type:Array},totalResults:{type:Number},visibilityBtn:{type:Boolean},visibilityBtnSearch:{type:Boolean}}},J={key:0,class:"more-data"},W={key:1,class:"more-data"};function Y(e,t,s,m,r,o){return a(),h(w,null,[s.tvShows.length?(a(),h("div",J,[y(i("button",{class:"more",onClick:t[0]||(t[0]=f(n=>this.$emit("more-series"),["prevent"]))}," More ",512),[[I,s.visibilityBtn]])])):b("",!0),s.tvShows.length?(a(),h("div",W,[y(i("button",{class:"more",onClick:t[1]||(t[1]=f(n=>this.$emit("more-searched-series"),["prevent"]))}," More ",512),[[I,s.visibilityBtnSearch&&s.tvShows.length!=s.totalResults]])])):b("",!0)],64)}const Z=v(X,[["render",Y]]);const ee={name:"SeriesAbout",props:{seriesInfo:{type:Object},overlay:{type:Boolean}},data(){return{IMG_PATH:"https://image.tmdb.org/t/p/w1280"}},methods:{getClassByRating(e){if(e>=7)return"red";if(e>=4)return"blue";if(e>0)return"gray"},ratingToPercentage(e){return e*10},dateTransform(e){return e.slice(0,4)},divider(e){return this.modifiedGenres(e).join(" / ")},modifiedGenres(e){return e.map(t=>V(t))}}},te={key:0,class:"overlay"},se={class:"about-series"},re=["src","alt"],ie={class:"about"},oe={class:"about-header"};function ne(e,t,s,m,r,o){return a(),p(L,{name:"scale"},{default:T(()=>[s.overlay?(a(),h("div",te,[i("section",se,[i("img",{class:"tmdb-data-poster",src:`${r.IMG_PATH}${s.seriesInfo.poster_path}`,alt:s.seriesInfo.name},null,8,re),i("article",ie,[i("header",oe,[i("h2",null,u(s.seriesInfo.name),1),i("div",{class:B(["tmdb-data-rating",o.getClassByRating(s.seriesInfo.vote_average)])},u(o.ratingToPercentage(s.seriesInfo.vote_average))+"% ",3)]),i("p",null,u(s.seriesInfo.overview),1),i("p",null,u(s.seriesInfo.original_language),1),i("p",null,u(o.dateTransform(s.seriesInfo.first_air_date)),1),i("p",null,u(o.divider(s.seriesInfo.genre_ids)),1)]),i("div",{class:"close-about-series",onClick:t[0]||(t[0]=n=>this.$emit("overlay-close"))}," X ")])])):b("",!0)]),_:1})}const ae=v(ee,[["render",ne],["__scopeId","data-v-435f5b7e"]]),le={components:{LoadingIcon:N,SeriesSearch:O,SeriesList:Q,SeriesMore:Z,SeriesAbout:ae,NotFound:P},data(){return{tvShows:[],seriesInfo:{},apiKey:"8335b966aa0001f618384081f205b83d",loading:!1,page:1,overlay:!1,query:"",message:"",totalResults:null,visibilityBtn:!0,visibilityBtnSearch:!1}},mounted(){this.getTvShows()},methods:{getTvShows(){this.message="",this.loading=!0,S.get(`https://api.themoviedb.org/3/tv/popular?api_key=${this.apiKey}&language=en-US&page=${this.page}`).then(e=>{this.tvShows=e.data.results,this.loading=!1}).catch(e=>{console.error(e)})},getMoreTvShows(){this.loading=!0,this.page++,this.message="",S.get(`https://api.themoviedb.org/3/tv/popular?api_key=${this.apiKey}&language=en-US&page=${this.page}`).then(e=>{e.data.results.forEach(t=>{this.tvShows.push(t)}),this.loading=!1}).catch(e=>{console.error(e)})},getSeriesBySearch(){this.loading=!0,this.tvShows=[],S.get(`https://api.themoviedb.org/3/search/tv?api_key=${this.apiKey}&query=${encodeURI(this.query)}&language=en-US&page=${this.page}&include_adult=false`).then(e=>{this.totalResults=e.data.total_results,e.data.results.length===0?(this.loading=!1,this.message="No records found."):(this.tvShows=e.data.results,this.loading=!1,this.message="")}).catch(e=>{console.error(e)})},getMoreSeriesBySearch(){this.loading=!0,this.page++,S.get(`https://api.themoviedb.org/3/search/tv?api_key=${this.apiKey}&query=${encodeURI(this.query)}&language=en-US&page=${this.page}&include_adult=false`).then(e=>{e.data.results.forEach(t=>{this.tvShows.push(t)}),this.loading=!1}).catch(e=>{console.error(e)})}}},ue={class:"tmdb-data-filter"},he={class:"filter"};function de(e,t,s,m,r,o){const n=d("LoadingIcon"),g=d("SeriesSearch"),_=d("NotFound"),M=d("SeriesList"),$=d("SeriesMore"),C=d("SeriesAbout");return a(),h(w,null,[i("main",null,[c(n,{loading:r.loading},null,8,["loading"]),i("div",ue,[i("div",he,[i("a",{href:"#",onClick:t[0]||(t[0]=f((...l)=>o.getTvShows&&o.getTvShows(...l),["prevent"]))},"Series")]),c(g,{onSearchedQuery:t[1]||(t[1]=l=>r.query=l),onFormSubmitted:o.getSeriesBySearch,onStarSearchSeries:t[2]||(t[2]=l=>(r.visibilityBtn=!1,r.visibilityBtnSearch=!0))},null,8,["onFormSubmitted"])]),c(_,{message:r.message},null,8,["message"]),c(M,{"tv-shows":r.tvShows,onTvShowInfo:t[3]||(t[3]=l=>r.seriesInfo=l),onOverlayOpen:t[4]||(t[4]=l=>r.overlay=!0)},null,8,["tv-shows"]),c($,{onMoreSeries:o.getMoreTvShows,onMoreSearchedSeries:o.getMoreSeriesBySearch,"total-results":r.totalResults,"tv-shows":r.tvShows,"visibility-btn":r.visibilityBtn,"visibility-btn-search":r.visibilityBtnSearch},null,8,["onMoreSeries","onMoreSearchedSeries","total-results","tv-shows","visibility-btn","visibility-btn-search"])]),c(C,{seriesInfo:r.seriesInfo,overlay:r.overlay,onOverlayClose:t[5]||(t[5]=l=>r.overlay=!1)},null,8,["seriesInfo","overlay"])],64)}const ve=v(le,[["render",de]]);export{ve as default};
